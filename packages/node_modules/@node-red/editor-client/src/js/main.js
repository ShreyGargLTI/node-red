/**
 * Copyright JS Foundation and other contributors, http://js.foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 **/


$(function() {
    if ((window.location.hostname !== "localhost") && (window.location.hostname !== "127.0.0.1")) {
        document.title = document.title+" : "+window.location.hostname;
    }
    console.log("document called");
    if(sessionStorage.getItem("nodeUserLogged") !=null ){
        RED.init({
            apiRootUrl: ""
        });
    }
    else if(RED.setSessions(window.location.href)){
        $.ajax({
            type: "POST",
            url: sessionStorage.getItem("url"),
            data: {token:sessionStorage.getItem("devtoken"), podId:sessionStorage.getItem("podId")},
            success: function(data){
               // console.log("reuest data from ajax", data );  
                RED.init({
                    apiRootUrl: ""
                });

            },
            error: function(err){
                console.log("reuest  err", err );  
                alert("Unauthorised");
            }
            
          });

     }else{
        alert("Unauthorised");
    }
    
});
